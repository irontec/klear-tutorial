


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuración lists &mdash; Klear Tutorial 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/klear.png"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'1.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
    <link rel="top" title="Klear Tutorial 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Yaml" href="index.html"/>
        <link rel="next" title="Configuración edit/new" href="edit.html"/>
        <link rel="prev" title="Configuración general" href="general.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> Klear Tutorial</a>
        <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Buscar documentos" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../environment/index.html">Instalación del entorno</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../environment/apache.html">Apache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/php.html">PHP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/mysql.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/phing.html">Phing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/zend.html">Zend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/klear.html">Klear</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../createProject/index.html">Creación del Proyecto</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../createProject/createEclipseProject.html">Crear el proyecto en Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/structure.html">Crear la estructura de directorios del proyecto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/zendProject.html">Crear proyecto Zend Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/klear.html">Configuración Klear</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/phing.html">Phing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/sqlsklear.html">SQLs Klear</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/generadoresDB.html">Generadores</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../joinProject/index.html">Unirse a un proyecto ya creado</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../joinProject/index.html#crear-un-proyecto-en-eclipse">Crear un proyecto en Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../joinProject/index.html#obtener-el-proyecto">Obtener el proyecto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../joinProject/index.html#bases-de-datos">Bases de Datos</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ini/index.html">Ficheros INI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ini/application-ini.html">application.ini</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ini/klear-ini.html">klear.ini</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../databases/index.html">Gestión de las Bases de Datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../databases/phing.html">Phing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../databases/generator.html">Generador: Base de Datos</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modelsMappers/index.html">Models y Mappers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modelsMappers/generator.html">Generador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modelsMappers/models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modelsMappers/mappers.html">Mappers</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Yaml</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="generator.html">Generador: Yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="klear-yaml.html">Klear.yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="general.html">Configuración general</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Configuración lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="edit.html">Configuración edit/new</a></li>
<li class="toctree-l2"><a class="reference internal" href="dashboard.html">Configuración Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="charts.html">Configuración Googlecharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields/index.html">Tipos de Campos</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogs.html">Dialogs</a></li>
<li class="toctree-l2"><a class="reference internal" href="iconos.html">Iconos</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../translate/index.html">Traducciones</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../translate/index.html#definicion-de-idiomas">Definición de idiomas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translate/index.html#estructura-de-los-directorios">Estructura de los directórios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translate/index.html#traduccion">Traducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translate/index.html#poedit">Poedit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../authCustom/index.html">Auth Custom</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../authCustom/roles.html">Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authCustom/klear.html">Zona Klear</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authCustom/public.html">Zona Pública</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../customScreen/index.html">Custom screen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../customScreen/index.html#configuracion">Configuración</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dynamicConfigClass/index.html">Klear Dinámico</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dynamicConfigClass/index.html#ejemplo-klearintervals">Ejemplo klearIntervals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../klearGallery/index.html">Klear Gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../klearGallery/index.html#esquema-de-base-de-datos">Esquema de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../klearGallery/index.html#configuracion-de-la-galeria">Configuración de la Galería</a></li>
<li class="toctree-l2"><a class="reference internal" href="../klearGallery/index.html#integracion-con-wymeditor">Integración con wymeditor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">REST</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rest/generators.html">Generadores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/application.html">application.ini</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/auth.html">Plugin de Autenticación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/restApi.html">restApi.ini</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/htaccess.html">.htaccess</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/controllers.html">Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/docs.html">Documentación</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fso/index.html">FSO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#fso-ini">fso.ini</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#config-life">config.life</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#config-routemap">config.routeMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#perfil-binay">Perfil Binay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#perfil-basico-de-image">Perfil Basico de Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#comprimir-calidad-de-imagen">Comprimir calidad de imagen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#perfil-extendido">Perfil Extendido</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#perfiles-avanzados-de-image">Perfiles avanzados de Image</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Klear Tutorial</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">Configuración lists</a></li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="../_sources/yaml/list.txt" rel="nofollow"> Ver origen</a>
      
    </li>
</ul>
<hr/>

          
  <div class="section" id="configuracion-lists">
<h1>Configuración lists<a class="headerlink" href="#configuracion-lists" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#configuracion" id="id3">Configuración</a></li>
<li><a class="reference internal" href="#rawselect" id="id4">rawSelect</a></li>
<li><a class="reference internal" href="#rawcondition" id="id5">rawCondition</a></li>
<li><a class="reference internal" href="#order" id="id6">order</a></li>
<li><a class="reference internal" href="#pagination" id="id7">pagination</a></li>
<li><a class="reference internal" href="#csv" id="id8">csv</a></li>
<li><a class="reference internal" href="#autorefresh" id="id9">autoRefresh</a></li>
<li><a class="reference internal" href="#preconfigured-filters" id="id10">preconfigured filters</a></li>
<li><a class="reference internal" href="#presetted-filters" id="id11">presetted filters</a></li>
<li><a class="reference internal" href="#filterclass" id="id12">filterClass</a></li>
<li><a class="reference internal" href="#parentoptioncustomizer" id="id13">parentOptionCustomizer</a></li>
<li><a class="reference internal" href="#mostrar-ocultar-opciones" id="id14">Mostrar/ocultar opciones</a></li>
</ul>
</div>
<p>A parte de las configuraciones descritas en <a class="reference internal" href="general.html#configuracion-general"><em>Configuración general</em></a>, el controller
del tipo <strong>list</strong> tiene otras configuraciones propias que se definen a continuación:</p>
<hr class="docutils" />
<div class="section" id="configuracion">
<h2><a class="toc-backref" href="#id3">Configuración</a><a class="headerlink" href="#configuracion" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">screens</span><span class="p-Indicator">:</span>
 <span class="l-Scalar-Plain">Contacts</span><span class="p-Indicator">:</span>
   <span class="l-Scalar-Plain">controller</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">list</span>
   <span class="l-Scalar-Plain">&lt;&lt;</span><span class="p-Indicator">:</span> <span class="nv">*Contactos</span>
   <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_(&quot;Listado de contactos&quot;)</span>
   <span class="l-Scalar-Plain">filterClass</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Filter_Class_Name</span>
   <span class="l-Scalar-Plain">rawSelect</span><span class="p-Indicator">:</span>
     <span class="s">&quot;FROM</span><span class="nv"> </span><span class="s">Table</span><span class="nv"> </span><span class="s">t</span><span class="nv"> </span><span class="s">INNER</span><span class="nv"> </span><span class="s">JOIN</span>
     <span class="s">(SELECT</span><span class="nv"> </span><span class="s">column1,</span><span class="nv"> </span><span class="s">column2,</span><span class="nv"> </span><span class="s">column3,</span><span class="nv"> </span><span class="s">column4</span>
     <span class="s">FROM</span><span class="nv"> </span><span class="s">Table</span><span class="nv"> </span><span class="s">GROUP</span><span class="nv"> </span><span class="s">BY</span><span class="nv"> </span><span class="s">column1,</span><span class="nv"> </span><span class="s">column2,</span><span class="nv"> </span><span class="s">column3,</span><span class="nv"> </span><span class="s">column4</span><span class="nv"> </span><span class="s">HAVING</span><span class="nv"> </span><span class="s">count(id)</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">1)</span><span class="nv"> </span><span class="s">dup</span>
     <span class="s">ON</span><span class="nv"> </span><span class="s">t.column1</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">dup.column1</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">t.column2</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">dup.column2</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">t.column3</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">dup.column3</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">t.column4</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">dup.column4&quot;</span>
   <span class="l-Scalar-Plain">searchAlias</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">t</span>
   <span class="l-Scalar-Plain">rawCondition</span><span class="p-Indicator">:</span> <span class="s">&quot;category</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">(&#39;category1&#39;,</span><span class="nv"> </span><span class="s">&#39;category2&#39;)&quot;</span>
   <span class="l-Scalar-Plain">order</span><span class="p-Indicator">:</span>
     <span class="l-Scalar-Plain">field</span><span class="p-Indicator">:</span>
       <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">firstName</span>
       <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">t.column1</span>
     <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">desc</span>
   <span class="l-Scalar-Plain">pagination</span><span class="p-Indicator">:</span>
     <span class="l-Scalar-Plain">items</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">40</span>
   <span class="l-Scalar-Plain">preconfiguredFilters</span><span class="p-Indicator">:</span>
     <span class="l-Scalar-Plain">ana</span><span class="p-Indicator">:</span>
       <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_(&quot;Ana&quot;)</span>
       <span class="l-Scalar-Plain">field</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">firstName</span>
       <span class="l-Scalar-Plain">value</span><span class="p-Indicator">:</span> <span class="s">&quot;Ana&quot;</span>
       <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_(&quot;Utiliza este pre filtrado para buscar a Ana&quot;)</span>
   <span class="l-Scalar-Plain">presettedFilters</span><span class="p-Indicator">:</span>
     <span class="l-Scalar-Plain">Etiqueta</span><span class="p-Indicator">:</span>
       <span class="l-Scalar-Plain">field</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">status</span>
       <span class="l-Scalar-Plain">value</span><span class="p-Indicator">:</span>
         <span class="p-Indicator">-</span> <span class="s">&#39;hidden&#39;</span>
         <span class="p-Indicator">-</span> <span class="s">&#39;waiting&#39;</span>
       <span class="l-Scalar-Plain">op</span><span class="p-Indicator">:</span> <span class="s">&#39;eq&#39;</span>
   <span class="l-Scalar-Plain">fields</span><span class="p-Indicator">:</span>
     <span class="l-Scalar-Plain">options</span><span class="p-Indicator">:</span>
       <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_(&quot;Opciones&quot;)</span>
       <span class="l-Scalar-Plain">screens</span><span class="p-Indicator">:</span>
         <span class="l-Scalar-Plain">editContact</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
       <span class="l-Scalar-Plain">dialogs</span><span class="p-Indicator">:</span>
         <span class="l-Scalar-Plain">deleteContact</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
         <span class="l-Scalar-Plain">customDialogContact</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
       <span class="l-Scalar-Plain">default</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">editContact</span>
</pre></div>
</div>
</div>
<div class="section" id="rawselect">
<h2><a class="toc-backref" href="#id4">rawSelect</a><a class="headerlink" href="#rawselect" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Permite que un ListScreen muestre los resultados de una SELECT escrita a mano.</p>
<blockquote>
<div><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">screens</span><span class="p-Indicator">:</span>
 <span class="l-Scalar-Plain">Contacts</span><span class="p-Indicator">:</span>
   <span class="l-Scalar-Plain">controller</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">list</span>
   <span class="l-Scalar-Plain">&lt;&lt;</span><span class="p-Indicator">:</span> <span class="nv">*Contactos</span>
   <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_(&quot;Listado de contactos&quot;)</span>
   <span class="l-Scalar-Plain">filterClass</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Filter_Class_Name</span>
   <span class="l-Scalar-Plain">rawSelect</span><span class="p-Indicator">:</span>
     <span class="s">&quot;FROM</span><span class="nv"> </span><span class="s">Table</span><span class="nv"> </span><span class="s">t</span><span class="nv"> </span><span class="s">INNER</span><span class="nv"> </span><span class="s">JOIN</span>
     <span class="s">(SELECT</span><span class="nv"> </span><span class="s">column1,</span><span class="nv"> </span><span class="s">column2,</span><span class="nv"> </span><span class="s">column3,</span><span class="nv"> </span><span class="s">column4</span>
     <span class="s">FROM</span><span class="nv"> </span><span class="s">Table</span><span class="nv"> </span><span class="s">GROUP</span><span class="nv"> </span><span class="s">BY</span><span class="nv"> </span><span class="s">column1,</span><span class="nv"> </span><span class="s">column2,</span><span class="nv"> </span><span class="s">column3,</span><span class="nv"> </span><span class="s">column4</span><span class="nv"> </span><span class="s">HAVING</span><span class="nv"> </span><span class="s">count(id)</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">1)</span><span class="nv"> </span><span class="s">dup</span>
     <span class="s">ON</span><span class="nv"> </span><span class="s">t.column1</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">dup.column1</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">t.column2</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">dup.column2</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">t.column3</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">dup.column3</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">t.column4</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">dup.column4&quot;</span>
   <span class="l-Scalar-Plain">searchAlias</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">t</span>
   <span class="l-Scalar-Plain">order</span><span class="p-Indicator">:</span>
     <span class="l-Scalar-Plain">field</span><span class="p-Indicator">:</span>
       <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">t.column1</span>
       <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">t.column2</span>
       <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">t.column3</span>
     <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">desc</span>
</pre></div>
</div>
</div></blockquote>
<p>En este ejemplo se muestra una SELECT que busca registros duplicados en la tabla Table comparando los campos column1, column2, column3 y column4.</p>
<p>La select se debe introducir desde la palabra FROM, es decir, no se debe usar el SELECT columName ni SELECT <a href="#id1"><span class="problematic" id="id2">*</span></a>.
Tampoco se debe usar WHERE ni LIMIT ni OFFSET, ya que LIMIT Y OFFSET los controla Klear en el ListScreen y el WHERE se puede meter como siempre en un &#8216;rawCondition&#8217;.</p>
<p>La opción searchAlias es opcional y se usa solo en casos como este ejemplo en los que a la tabla se le da un alias (t).
En este caso si no se pone searchAlias: t no funcionarán los filtros ni las búsquedas de klear.</p>
</div>
<div class="section" id="rawcondition">
<h2><a class="toc-backref" href="#id5">rawCondition</a><a class="headerlink" href="#rawcondition" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Permite escribir una condición directamente.</p>
</div>
<div class="section" id="order">
<h2><a class="toc-backref" href="#id6">order</a><a class="headerlink" href="#order" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Indica el campo o campos por los que se ordena el listado, también el orden.
Hay dos formas posibles de ordenación.</p>
<ol class="arabic simple">
<li>Orden por un único campo:</li>
</ol>
<blockquote>
<div><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">order</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">firstName</span>
<span class="l-Scalar-Plain">orderType</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">desc</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><strong>order</strong>: campo por el que se ordena.</li>
<li><strong>orderType</strong>: orden a seguir. Puede ser <em>ASC</em> o <em>DESC</em>, por defecto <strong>ASC</strong>.</li>
</ul>
<ol class="arabic simple" start="2">
<li>Orden por mas de un campo:</li>
</ol>
<blockquote>
<div><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">order</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">field</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">firstName</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">lastName</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
  <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">desc</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><strong>field</strong>: indica el campo o campos por los que ordenar. Puede ser uno solo de forma <em>field:
firstName</em> o varios como está en el ejemplo.</li>
<li><strong>type</strong>: indica el orden en que se ordena, igual para todos los campos que vayan en field.
Puede ser <em>asc</em> o <em>desc</em>. No es obligatorio y por defecto es lo que considere mysql.</li>
</ul>
</div>
<div class="section" id="pagination">
<h2><a class="toc-backref" href="#id7">pagination</a><a class="headerlink" href="#pagination" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Se puede definir el límite de items por página.</p>
<ul class="simple">
<li><strong>items</strong>: número de elementos que se muestran por página.</li>
</ul>
</div>
<div class="section" id="csv">
<h2><a class="toc-backref" href="#id8">csv</a><a class="headerlink" href="#csv" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Activar la opción de <strong>CSV</strong> genera un botón, el cual nos devuelve un <em>csv</em> para descarga
con el listado actual.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">csv</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>La opción de <strong>CSV</strong> tiene la posibilidad de añadir propiedades avanzadas. En el siguiente
ejemplo se muestran todas:</p>
<div class="highlight-yaml"><pre>csv:
  active: true
  filename: "ArchivoCSV"
  headers: true
  enclosure: '"'
  separator: ";"
  nameklear: true
  ignoreBlackList: true
  newLine: "\r\n" windows | "\r" mac | "\n" unix
  encoding: "utf-8" | "iso-8859-1"
  executionSeconds: "n"</pre>
</div>
<ul class="simple">
<li><strong>executionSeconds</strong>: Setea dinámicamente el max_execution time cuando alquien descarga csv.</li>
</ul>
</div>
<div class="section" id="autorefresh">
<h2><a class="toc-backref" href="#id9">autoRefresh</a><a class="headerlink" href="#autorefresh" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La opción <strong>autoRefresh</strong> nos permite refrescar el listado cada 30 segundos. Aunque 15 segundos antes de refrescar, nos mostrará un botón para posponer el refrescado del listado por si estamos trabajando en el listado.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">autoRefresh</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>También podemos optar por configurar dicho intervalo, siempre y cuando el valor numérico sea mayor que 30 (sino se usará la que está configurada por defecto). Por ejemplo:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">autoRefresh</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">90</span>
</pre></div>
</div>
</div>
<div class="section" id="preconfigured-filters">
<h2><a class="toc-backref" href="#id10">preconfigured filters</a><a class="headerlink" href="#preconfigured-filters" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Podemos definir filtros pre-configurados, los cuales generan botones en la parte superior
de los listados. Se define en el primer nivel del <strong>screen</strong>.</p>
<p>En el ejemplo superior, se ha pre-configurado un filtro para aquellas personas que se llamen <em>Ana</em>.
Se pueden configurar tantos como se requieran.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">preconfiguredFilters</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">ana</span><span class="p-Indicator">:</span> <span class="c1"># Etiqueta para definir el filtro</span>
    <span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_(&quot;Ana&quot;)</span>
    <span class="l-Scalar-Plain">field</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">firstName</span>
    <span class="l-Scalar-Plain">value</span><span class="p-Indicator">:</span> <span class="s">&quot;Ana&quot;</span>
    <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_(&quot;Utiliza este pre filtrado para buscar a Ana&quot;)</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>title</strong>: título del botón del filtro.</li>
<li><strong>field</strong>: campo por el que se filtrará.</li>
<li><strong>value</strong>: valor que se usará para el filtrado. Si se quiere filtrar por un campo NULL, en <em>value</em> debe ir en comillas &#8216;NULL&#8217;. Ejemplo: value: &#8216;NULL&#8217;</li>
<li><strong>description</strong>: valor que se usará para mostrar en el tooltip.</li>
</ul>
</div>
<div class="section" id="presetted-filters">
<h2><a class="toc-backref" href="#id11">presetted filters</a><a class="headerlink" href="#presetted-filters" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Básicamente tiene la misma funcionalidad que la de los filtros preconfigurados, con la diferencia de que estos
se aplican por defecto. Se define en el primer nivel del <strong>screen</strong>.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">presettedFilters</span><span class="p-Indicator">:</span>
   <span class="l-Scalar-Plain">Etiqueta</span><span class="p-Indicator">:</span> <span class="c1"># Etiqueta para definir el filtro</span>
     <span class="l-Scalar-Plain">field</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">status</span>
     <span class="l-Scalar-Plain">value</span><span class="p-Indicator">:</span>
       <span class="p-Indicator">-</span> <span class="s">&#39;hidden&#39;</span>
       <span class="p-Indicator">-</span> <span class="s">&#39;waiting&#39;</span>
     <span class="l-Scalar-Plain">op</span><span class="p-Indicator">:</span> <span class="s">&#39;eq&#39;</span>
</pre></div>
</div>
<ul>
<li><p class="first"><strong>field</strong>: campo sobre el que se aplica el presetted filter</p>
</li>
<li><p class="first"><strong>value</strong>: puede ser <em>array</em> o <em>string</em>, es el valor por el que se filtrará.</p>
</li>
<li><dl class="first docutils">
<dt><strong>op</strong>: por defecto será <strong>eq</strong>.</dt>
<dd><ul class="first last simple">
<li><strong>lt</strong> : menor que <em>(less than)</em></li>
<li><strong>eq</strong>: igual <em>(equal)</em></li>
<li><strong>gt</strong>: mayor que <em>(greater than)</em></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="filterclass">
<h2><a class="toc-backref" href="#id12">filterClass</a><a class="headerlink" href="#filterclass" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un ejemplo de como se estructura un <strong>filterClass</strong> personalizado:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
   <span class="k">class</span> <span class="nc">Filter_Class_Name</span> <span class="k">implements</span> <span class="nx">KlearMatrix_Model_Interfaces_FilterList</span>
   <span class="p">{</span>
       <span class="k">protected</span> <span class="nv">$_condition</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

       <span class="k">public</span> <span class="k">function</span> <span class="nf">setRouteDispatcher</span><span class="p">(</span><span class="nx">KlearMatrix_Model_RouteDispatcher</span> <span class="nv">$routeDispatcher</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="c1">//La acción actual</span>
           <span class="nv">$currentAction</span> <span class="o">=</span> <span class="nv">$routeDispatcher</span><span class="o">-&gt;</span><span class="na">getActionName</span><span class="p">();</span>

           <span class="c1">//El controller actual (edit, list...)</span>
           <span class="nv">$currentController</span> <span class="o">=</span> <span class="nv">$routeDispatcher</span><span class="o">-&gt;</span><span class="na">getControllerName</span><span class="p">();</span>

           <span class="c1">//Para recoger el PK de la pantalla anterior</span>
           <span class="nv">$pk</span> <span class="o">=</span> <span class="nv">$routeDispatcher</span><span class="o">-&gt;</span><span class="na">getParam</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">);</span>

           <span class="c1">//Añadir la condición</span>
           <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_condition</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;Our Condition&quot;</span><span class="p">;</span>

           <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
       <span class="p">}</span>

       <span class="c1">//Ésta función no debe tocarse</span>
       <span class="k">public</span> <span class="k">function</span> <span class="nf">getCondition</span><span class="p">()</span>
       <span class="p">{</span>
           <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_condition</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
               <span class="k">return</span> <span class="s1">&#39;(&#39;</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s2">&quot; AND &quot;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_condition</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
           <span class="p">}</span>
           <span class="k">return</span><span class="p">;</span>
       <span class="p">}</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="parentoptioncustomizer">
<h2><a class="toc-backref" href="#id13">parentOptionCustomizer</a><a class="headerlink" href="#parentoptioncustomizer" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta propiedad permite aplicar modificaciones sobre las opciones de los listados.
Se define en el primer nivel del <strong>screen</strong>.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">tiendasList_screen</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">...</span>
  <span class="l-Scalar-Plain">options</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">screens</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">tiendasHorariosList_screen</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

<span class="l-Scalar-Plain">tiendasHorariosList_screen</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">filterField</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">idTienda</span>
  <span class="l-Scalar-Plain">parentOptionCustomizer</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">recordCount</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">App_Model_MyCustomizer</span>
</pre></div>
</div>
<p>En el ejemplo se muestra la opción de de <strong>recordCount</strong> sobre la opción que se ha añadido
a la pantalla <em>tiendasList_screen</em>. Esto lo que hará es mostrar el número de registros que hay
dentro de la opción filtrada.</p>
<p>La segunda opción dentro de <strong>parentOptionCustomizer</strong>, es el nombre de una clase propia.
Se puede definir una clase e implantar lo que se desee siempre y cuando extienda de
<strong>KlearMatrix_Model_Interfaces_ParentOptionCustomizer</strong>.</p>
</div>
<div class="section" id="mostrar-ocultar-opciones">
<h2><a class="toc-backref" href="#id14">Mostrar/ocultar opciones</a><a class="headerlink" href="#mostrar-ocultar-opciones" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Dentro del <strong>parentOptionCustomizer</strong>, podemos definir cualquier clase que queramos.
Dentro de esta clase podemos jugar a mostrar/ocultar los botones de opciones de
la vista de lista.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">App_Model_MyCustomizer</span> <span class="k">implements</span> <span class="nx">\KlearMatrix_Model_Interfaces_ParentOptionCustomizer</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var KlearMatrix_Model_RouteDispatcher</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$_mainRouter</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @var array</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$_mainRouterOriginalParams</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @var KlearMatrix_Model_AbstractOption</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$_option</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$_resultWrapper</span> <span class="o">=</span> <span class="s1">&#39;div&#39;</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$_cssClass</span> <span class="o">=</span> <span class="s1">&#39;hidden&#39;</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">\Zend_Config</span> <span class="nv">$configuration</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$front</span> <span class="o">=</span> <span class="nx">\Zend_Controller_Front</span><span class="o">::</span><span class="na">getInstance</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_mainRouter</span> <span class="o">=</span> <span class="nv">$front</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getUserParam</span><span class="p">(</span><span class="s2">&quot;mainRouter&quot;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_mainRouterOriginalParams</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_mainRouter</span><span class="o">-&gt;</span><span class="na">getParams</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setOption</span> <span class="p">(</span><span class="nx">\KlearMatrix_Model_Option_Abstract</span> <span class="nv">$option</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_option</span> <span class="o">=</span> <span class="nv">$option</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @return KlearMatrix_Model_ParentOptionCustomizer_Response</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">customize</span><span class="p">(</span><span class="nv">$parentModel</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Si queremos recoger el Mapper/Model del screen a cargar</span>
        <span class="nv">$item</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_mainRouter</span><span class="o">-&gt;</span><span class="na">loadScreen</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_option</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span>
        <span class="nv">$model</span> <span class="o">=</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getObjectInstance</span><span class="p">();</span>
        <span class="nv">$mapper</span> <span class="o">=</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">getMapper</span><span class="p">();</span>

        <span class="c1">// Al tratarse de un filtered screen necesita la pk del padre</span>
        <span class="c1">// se puede envíar cualquier parametro de ésta misma forma</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_mainRouter</span><span class="o">-&gt;</span><span class="na">setParams</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s2">&quot;pk&quot;</span> <span class="o">=&gt;</span> <span class="nv">$parentModel</span><span class="o">-&gt;</span><span class="na">getPrimaryKey</span><span class="p">()));</span>

        <span class="cm">/* **NUESTRO CÓDIGO A IMPLEMENTAR** */</span>

        <span class="c1">// Hay que tener en cuenta que todas las options pasan por aquí</span>
        <span class="c1">// nos cercioramos de que es sobre la que queremos actuar, de lo</span>
        <span class="c1">// contrario se devuelve la respuesta que espera el sistema</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_option</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;nuestro_screen&quot;</span>
            <span class="o">&amp;&amp;</span> <span class="nv">$queremosMostrar</span><span class="p">)</span> <span class="p">{</span>
            <span class="cm">/* Para mostrar el botón habría que devolver null */</span>
            <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="cm">/* Para no mostrarlo iniciamos una respuesta vacía */</span>
            <span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\KlearMatrix_Model_ParentOptionCustomizer_Response</span><span class="p">();</span>
            <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setParentWrapper</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_resultWrapper</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">setParentCssClass</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_cssClass</span><span class="p">);</span>

            <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Como se puede ver, a esta función nos llega el <strong>$parentModel</strong>, que sería el modelo de la línea de lista sobre la que se mostrará el botón de opción o no.</p>
<p>Para saber exactamente sobre que botón estamos trabajando debemos utilizar:</p>
<div class="highlight-guess"><div class="highlight"><pre><span class="err">$</span><span class="n">this</span><span class="o">-&gt;</span><span class="n">_option</span><span class="o">-&gt;</span><span class="n">getName</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="edit.html" class="btn btn-neutral float-right" title="Configuración edit/new"/>Siguiente <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="general.html" class="btn btn-neutral" title="Configuración general"><span class="icon icon-circle-arrow-left"></span> Anterior</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2014, Irontec.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>