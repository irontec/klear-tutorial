

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>application.ini &mdash; documentación de Klear Tutorial - 1.0</title>
  

  
  
    <link rel="shortcut icon" href="../_static/klear.png"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'1.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
    <link rel="top" title="documentación de Klear Tutorial - 1.0" href="../index.html"/>
        <link rel="up" title="Ficheros INI" href="index.html"/>
        <link rel="next" title="klear.ini" href="klear-ini.html"/>
        <link rel="prev" title="Ficheros INI" href="index.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> Klear Tutorial</a>
        <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Buscar documentos" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../environment/index.html">Instalación del entorno</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../environment/apache.html">Apache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/php.html">PHP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/mysql.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/phing.html">Phing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/zend.html">Zend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment/klear.html">Klear</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../createProject/index.html">Creación del Proyecto</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../createProject/createEclipseProject.html">Crear el proyecto en Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/structure.html">Crear la estructura de directorios del proyecto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/zendProject.html">Crear proyecto Zend Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/klear.html">Configuración Klear</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/phing.html">Phing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/sqlsklear.html">SQLs Klear</a></li>
<li class="toctree-l2"><a class="reference internal" href="../createProject/generadoresDB.html">Generadores</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../joinProject/index.html">Unirse a un proyecto ya creado</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../joinProject/index.html#crear-un-proyecto-en-eclipse">Crear un proyecto en Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../joinProject/index.html#obtener-el-proyecto">Obtener el proyecto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../joinProject/index.html#bases-de-datos">Bases de Datos</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Ficheros INI</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">application.ini</a></li>
<li class="toctree-l2"><a class="reference internal" href="klear-ini.html">klear.ini</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../databases/index.html">Gestión de las Bases de Datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../databases/phing.html">Phing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../databases/generator.html">Generador: Base de Datos</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modelsMappers/index.html">Models y Mappers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modelsMappers/generator.html">Generador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modelsMappers/models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modelsMappers/mappers.html">Mappers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../yaml/index.html">Yaml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../yaml/generator.html">Generador: Yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/klear-yaml.html">Klear.yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/general.html">Configuración general</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/list.html">Configuración lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/edit.html">Configuración edit/new</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/dashboard.html">Configuración Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/charts.html">Configuración Googlecharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/fields/index.html">Tipos de Campos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/dialogs.html">Dialogs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yaml/iconos.html">Iconos</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../translate/index.html">Traducciones</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../translate/index.html#definicion-de-idiomas">Definición de idiomas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translate/index.html#estructura-de-los-directorios">Estructura de los directórios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translate/index.html#traduccion">Traducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translate/index.html#poedit">Poedit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../authCustom/index.html">Auth Custom</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../authCustom/roles.html">Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authCustom/klear.html">Zona Klear</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authCustom/public.html">Zona Pública</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../customScreen/index.html">Custom screen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../customScreen/index.html#configuracion">Configuración</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dynamicConfigClass/index.html">Klear Dinámico</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dynamicConfigClass/index.html#ejemplo-klearintervals">Ejemplo klearIntervals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../klearGallery/index.html">Klear Gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../klearGallery/index.html#esquema-de-base-de-datos">Esquema de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../klearGallery/index.html#configuracion-de-la-galeria">Configuración de la Galería</a></li>
<li class="toctree-l2"><a class="reference internal" href="../klearGallery/index.html#integracion-con-wymeditor">Integración con wymeditor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rest/index.html">REST</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rest/generators.html">Generadores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/application.html">application.ini</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/auth.html">Plugin de Autenticación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/restApi.html">restApi.ini</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/htaccess.html">.htaccess</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/controllers.html">Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest/docs.html">Documentación</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fso/index.html">FSO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#fso-ini">fso.ini</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#config-life">config.life</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#config-routemap">config.routeMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#perfil-binay">Perfil Binay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#perfil-basico-de-image">Perfil Basico de Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#comprimir-calidad-de-imagen">Comprimir calidad de imagen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#perfil-extendido">Perfil Extendido</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fso/index.html#perfiles-avanzados-de-image">Perfiles avanzados de Image</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Klear Tutorial</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">application.ini</a></li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="../_sources/ini/application-ini.txt" rel="nofollow"> Ver origen</a>
      
    </li>
</ul>
<hr/>

          
  <div class="section" id="application-ini">
<h1>application.ini<a class="headerlink" href="#application-ini" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Este archivo de configuración controla el comportamiento de la aplicación Zend.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">En el archivo se hace referencia a los ficheros de Klear, estos deberán ser previamente
instalados en el sistema.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si queremos configurar la aplication.ini. Tenemos un ejemplo bastante útil en la sección <a class="reference internal" href="../createProject/klear.html#klear"><em>Creación del Proyecto</em></a>.</p>
</div>
<div class="section" id="codigos-exclusivos-solo-para-klear">
<h2>Códigos exclusivos solo para Klear<a class="headerlink" href="#codigos-exclusivos-solo-para-klear" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#klear-cache" id="id1">Klear Cache</a><ul>
<li><a class="reference internal" href="#klear-memcached" id="id2">Klear Memcached</a></li>
<li><a class="reference internal" href="#klear-black-hole" id="id3">Klear Black Hole</a></li>
<li><a class="reference internal" href="#klearmatrixdashboard-cache" id="id4">klearmatrixDashboard cache</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plugin-kleardress" id="id5">Plugin Kleardress</a></li>
<li><a class="reference internal" href="#translator-zona-publica" id="id6">Translator Zona Pública</a></li>
<li><a class="reference internal" href="#logs" id="id7">Logs</a><ul>
<li><a class="reference internal" href="#prioridad" id="id8">Prioridad</a></li>
<li><a class="reference internal" href="#expresion-regular" id="id9">Expresión regular</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="klear-cache">
<h3><a class="toc-backref" href="#id1">Klear Cache</a><a class="headerlink" href="#klear-cache" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="section" id="klear-memcached">
<h4><a class="toc-backref" href="#id2">Klear Memcached</a><a class="headerlink" href="#klear-memcached" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Usa Memcached en vez de la caché normal.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.cachemanager.klearconfig.backend.name</span> <span class="o">=</span> <span class="s">Memcached</span>
</pre></div>
</div>
</div>
<div class="section" id="klear-black-hole">
<h4><a class="toc-backref" href="#id3">Klear Black Hole</a><a class="headerlink" href="#klear-black-hole" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Desactiva el uso de la cache</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.cachemanager.klearconfig.backend.name</span> <span class="o">=</span> <span class="s">Black_Hole</span>
</pre></div>
</div>
</div>
<div class="section" id="klearmatrixdashboard-cache">
<h4><a class="toc-backref" href="#id4">klearmatrixDashboard cache</a><a class="headerlink" href="#klearmatrixdashboard-cache" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Por defecto el Dashboard es cacheado cada 5 minutos. Sin embargo haciendo uso de los siguiente códigos podemos cambiar el tiempo
y la forma de guardar la caché:</p>
<p>Usar el Memcached en el Dashboard:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.cachemanager.klearmatrixDashboard.backend.name</span> <span class="o">=</span> <span class="s">Memcached</span>
</pre></div>
</div>
<p>Cambiar el tiempo de cacheado a 10 minutos:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.cachemanager.klearmatrixDashboard.frontend.options.lifetime</span> <span class="o">=</span> <span class="s">600</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="plugin-kleardress">
<h3><a class="toc-backref" href="#id5">Plugin Kleardress</a><a class="headerlink" href="#plugin-kleardress" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este plugin cambia la dirección <strong>/klear</strong> por solo <strong>/</strong>, tendremos a Klear en el dominio inicial (index), aunque también
significaría <strong>no hacer uso de la zona pública del proyecto</strong>.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.frontController.plugins.KlearDress</span> <span class="o">=</span> <span class="s">&quot;Iron_Controller_Plugin_KlearDress&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Ideal para <strong>[intra|extra]</strong>nets.</p>
</div>
</div>
<div class="section" id="translator-zona-publica">
<h3><a class="toc-backref" href="#id6">Translator Zona Pública</a><a class="headerlink" href="#translator-zona-publica" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este código nos ayuda hacer uso de los archivos .po desde la zona pública del proyecto (hacer una web Multi-idioma):</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.frontController.plugins[]</span> <span class="o">=</span> <span class="s">&#39;Iron_Controller_Plugin_PublicTranslator&#39;</span>
<span class="na">translate.language.es.title</span> <span class="o">=</span> <span class="s">&#39;Español&#39;</span>
<span class="na">translate.language.es.language</span> <span class="o">=</span> <span class="s">&#39;es&#39;</span>
<span class="na">translate.language.es.locale</span> <span class="o">=</span> <span class="s">&#39;es_ES&#39;</span>
<span class="na">translate.language.en.title</span> <span class="o">=</span> <span class="s">&#39;English&#39;</span>
<span class="na">translate.language.en.language</span> <span class="o">=</span> <span class="s">&#39;en&#39;</span>
<span class="na">translate.language.en.locale</span> <span class="o">=</span> <span class="s">&#39;en_US&#39;</span>
<span class="na">translate.language.fr.title</span> <span class="o">=</span> <span class="s">&#39;Francés&#39;</span>
<span class="na">translate.language.fr.language</span> <span class="o">=</span> <span class="s">&#39;fr&#39;</span>
<span class="na">translate.language.fr.locale</span> <span class="o">=</span> <span class="s">&#39;fr_FR&#39;</span>
<span class="na">translate.language.pt.title</span> <span class="o">=</span> <span class="s">&#39;Portugués&#39;</span>
<span class="na">translate.language.pt.language</span> <span class="o">=</span> <span class="s">&#39;pt&#39;</span>
<span class="na">translate.language.pt.locale</span> <span class="o">=</span> <span class="s">&#39;pt_PT&#39;</span>

<span class="na">translate.requestParam</span> <span class="o">=</span> <span class="s">&#39;lang&#39;</span>
<span class="na">translate.defaultLanguage</span> <span class="o">=</span> <span class="s">&#39;es&#39;</span>
<span class="na">translate.cookies.enabled</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">translate.cookies.lifetime</span> <span class="o">=</span> <span class="s">2592000 ;1 month</span>

<span class="na">defaultLanguageZendRegistryKey</span> <span class="o">=</span> <span class="s">&#39;defaultLang&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="logs">
<h3><a class="toc-backref" href="#id7">Logs</a><a class="headerlink" href="#logs" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Con esto configuramos los logs tanto para klear como para cualquier parte del código de nuestra aplicación.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="c1">;;;;;;;;;;</span>
<span class="c1">;; LOGS ;;</span>
<span class="c1">;;;;;;;;;;</span>
<span class="c1">;;;;;;;;;;;;;;; Priorities ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; EMERG   = 0; // Emergency: system is unusable             ;;</span>
<span class="c1">;; ALERT   = 1; // Alert: action must be taken immediately   ;;</span>
<span class="c1">;; CRIT   = 2; // Critical: critical conditions              ;;</span>
<span class="c1">;; ERR    = 3; // Error: error conditions                    ;;</span>
<span class="c1">;; WARN   = 4; // Warning: warning conditions                ;;</span>
<span class="c1">;; NOTICE = 5; // Notice: normal but significant condition   ;;</span>
<span class="c1">;; INFO   = 6; // Informational: informational messages      ;;</span>
<span class="c1">;; DEBUG  = 7; // Debug: debug messages                      ;;</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;;;;;;;;;;;;;;; Available filters ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;;</span>
<span class="c1">;;</span>
<span class="c1">;; Zend_Log_Filter_Message</span>
<span class="c1">;;</span>
<span class="c1">;; resources.log.&lt;LOGGER&gt;.filterName = &#39;Message&#39;</span>
<span class="c1">;;</span>
<span class="c1">;; resources.log.&lt;LOGGER&gt;.filterParams.regexp = &lt;REGEX&gt;</span>
<span class="c1">;;</span>
<span class="c1">;;</span>
<span class="c1">;;</span>
<span class="c1">;; Zend_Log_Filter_Priority</span>
<span class="c1">;;</span>
<span class="c1">;; resources.log.&lt;LOGGER&gt;.filterName = &#39;Priority&#39;</span>
<span class="c1">;;</span>
<span class="c1">;; resources.log.&lt;LOGGER&gt;.filterParams.priority = &lt;PRIORITY&gt; ;;</span>
<span class="c1">;; resources.log.&lt;LOGGER&gt;.filterParams.operator = &quot;&lt;=&quot;</span>
<span class="c1">;;</span>
<span class="c1">;;</span>
<span class="c1">;;</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="na">resources.log.timestampFormat</span> <span class="o">=</span> <span class="s">&quot;Y-m-d H:s:i&quot;</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;; MAIL ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="na">resources.log.mail.writerName</span> <span class="o">=</span> <span class="s">&quot;Mail&quot;</span>
<span class="na">resources.log.mail.writerParams.mail</span> <span class="o">=</span> <span class="s">&quot;Zend_Mail&quot;</span>
<span class="na">Resources.log.mail.writerParams.charset</span> <span class="o">=</span> <span class="s">&#39;utf-8&#39;</span>
<span class="na">resources.log.mail.writerParams.subject</span> <span class="o">=</span> <span class="s">&#39;miApp log&#39;</span>
<span class="na">resources.log.mail.writerParams.from</span> <span class="o">=</span> <span class="s">&quot;no-reply@irontec.com&quot;</span>
<span class="na">resources.log.mail.writerParams.to[]</span> <span class="o">=</span> <span class="s">&#39;mail-destino@irontec.com&#39;</span>
<span class="na">resources.log.mail.filterName</span> <span class="o">=</span> <span class="s">&quot;Priority&quot;</span>
<span class="na">resources.log.mail.filterParams.priority</span> <span class="o">=</span> <span class="s">2</span>
<span class="na">resources.log.mail.filterParams.operator</span> <span class="o">=</span> <span class="s">&quot;&lt;=&quot;</span>
<span class="na">resources.log.mail.formatterName</span> <span class="o">=</span> <span class="s">&quot;Simple&quot;</span>
<span class="na">resources.log.mail.formatterParams.format</span> <span class="o">=</span> <span class="s">&#39;%timestamp% %priorityName% (%priority%) [Mail 1]: %message%&#39;</span>
<span class="na">resources.log.mail2.writerName</span> <span class="o">=</span> <span class="s">&quot;Mail&quot;</span>
<span class="na">resources.log.mail2.writerParams.mail</span> <span class="o">=</span> <span class="s">&quot;Zend_Mail&quot;</span>
<span class="na">resources.log.mail2.writerParams.charset</span> <span class="o">=</span> <span class="s">&#39;utf-8&#39;</span>
<span class="na">resources.log.mail2.writerParams.subject</span> <span class="o">=</span> <span class="s">&#39;appName log&#39;</span>
<span class="na">resources.log.mail2.writerParams.from</span> <span class="o">=</span> <span class="s">&quot;no-reply@origen.com&quot;</span>
<span class="na">resources.log.mail2.writerParams.to[]</span> <span class="o">=</span> <span class="s">&#39;destino@destino.com&#39;</span>
<span class="na">resources.log.mail2.filterName</span> <span class="o">=</span> <span class="s">&#39;Message&#39;</span>
<span class="na">resources.log.mail2.filterParams.regexp</span> <span class="o">=</span> <span class="s">&#39;#^\[Texto\]#&#39;</span>
<span class="na">resources.log.mail2.formatterName</span> <span class="o">=</span> <span class="s">&quot;Simple&quot;</span>
<span class="na">resources.log.mail2.formatterParams.format</span> <span class="o">=</span> <span class="s">&#39;%timestamp% %priorityName% (%priority%) [Mail 2]: %message%&#39;</span>
<span class="c1">;;;;;;;;; SYSLOG ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="na">resources.log.syslog.writerName</span> <span class="o">=</span> <span class="s">&quot;Syslog&quot;</span>
<span class="na">resources.log.syslog.writerParams.application</span> <span class="o">=</span> <span class="s">&quot;appName&quot;</span>
<span class="na">resources.log.syslog.writerParams.facility</span> <span class="o">=</span> <span class="s">LOG_SYSLOG</span>
<span class="na">resources.log.syslog.filterName</span> <span class="o">=</span> <span class="s">&quot;Priority&quot;</span>
<span class="na">resources.log.syslog.filterParams.priority</span> <span class="o">=</span> <span class="s">6</span>
<span class="na">resources.log.syslog.filterParams.operator</span> <span class="o">=</span> <span class="s">&quot;&lt;=&quot;</span>
<span class="na">resources.log.syslog.formatterName</span> <span class="o">=</span> <span class="s">&quot;Simple&quot;</span>
<span class="na">resources.log.syslog.formatterParams.format</span> <span class="o">=</span> <span class="s">&#39;%timestamp% %priorityName% (%priority%): %message%&#39;</span>
<span class="c1">;;;;;;;;;;;;; FIREBUG ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="na">resources.log.firebug.writerName</span> <span class="o">=</span> <span class="s">&quot;Firebug&quot;</span>
<span class="na">resources.log.firebug.filterName</span> <span class="o">=</span> <span class="s">&quot;Priority&quot;</span>
<span class="na">resources.log.firebug.filterParams.priority</span> <span class="o">=</span> <span class="s">7</span>
<span class="na">resources.log.firebug.filterParams.operator</span> <span class="o">=</span> <span class="s">&quot;&lt;=&quot;</span>
<span class="na">resources.log.firebug.formatterName</span> <span class="o">=</span> <span class="s">&quot;Simple&quot;</span>
<span class="na">resources.log.firebug.formatterParams.format</span> <span class="o">=</span> <span class="s">&#39;%timestamp% %priorityName% (%priority%): %message%&#39;</span>
<span class="c1">;;;;;;;;;;;;; Zend_Log_Writer_Stream ;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="na">resources.log.stream.writerName</span> <span class="o">=</span> <span class="s">&quot;Stream&quot;</span>
<span class="na">resources.log.stream.writerParams.stream</span> <span class="o">=</span> <span class="s">APPLICATION_PATH &quot;/logs/appNamelog.log&quot;</span>
<span class="na">resources.log.stream.writerParams.mode</span> <span class="o">=</span> <span class="s">&quot;a&quot;</span>
<span class="na">resources.log.stream.formatterName</span> <span class="o">=</span> <span class="s">&quot;Simple&quot;</span>
<span class="na">resources.log.stream.formatterParams.format</span> <span class="o">=</span> <span class="s">&#39;%timestamp% %priorityName% (%priority%) FILE: %message%&#39; PHP_EOL</span>
<span class="c1">;;;;;;;;;; Zend_Log_Writer_Null ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="na">resources.log.null.writerName</span> <span class="o">=</span> <span class="s">&quot;Null&quot;</span>
</pre></div>
</div>
<p>De esta manera podemos añadir todos los writters que queramos, aunque sean del mismo tipo, siempre que le demos un nombre único ( <strong>resources.log.writter1</strong>... <strong>resources.log.writter2</strong>... ) Hay que tener en cuenta que cada writter tiene sus propios parámetros.
La configuración <strong>timestampFormat = &#8220;Y-m-d H:s:i&#8221;</strong> es común a todos los writters.</p>
<p>Klear está preparado para utilizar esta configuración por lo que si sólo queremos usar logs por defecto de Klear con esto sería suficiente.</p>
<p>Para hacer logs en cualquier otra parte del código hay que hacer lo siguiente:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$bootstrap = \Zend_Controller_Front::getInstance()-&gt;getParam(&#39;bootstrap&#39;);</span>
<span class="x">$logger = $bootstrap-&gt;getResource(&#39;log&#39;);</span>
<span class="x">$logger-&gt;log(&quot;Mensaje&quot;, \Zend_Log::WARN);</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p>Hay que tener en cuenta que <strong>si $logger es nulo</strong> (no se ha especificado ningún writter en el application.ini) <strong>e intentamos hacer:</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>$logger-&gt;log(&quot;Mensaje&quot;, \Zend_Log::WARN);
</pre></div>
</div>
<p>se lanzará una excepción, por lo que si en algún entorno no queremos loggear hay que añadir la línea:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">resources.log.null.writerName = &quot;Null&quot;</span>
</pre></div>
</div>
</div>
<p>Con esto vamos a loggear en todos los writters que lo permitan. Para saber que writters van aloggear nos tenemos que fijar en los filtros ( <strong>resources.log.writter1.filterName</strong>, <strong>resources.log.writter1.filterParams</strong>. ).
Básicamente hay dos tipos de filtros:</p>
<blockquote>
<div><ul class="simple">
<li>Los que filtran por prioridad.</li>
<li>Los que filtran por expresión regular en el mensaje.</li>
</ul>
</div></blockquote>
<div class="section" id="prioridad">
<h4><a class="toc-backref" href="#id8">Prioridad</a><a class="headerlink" href="#prioridad" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.log.writter1.filterName</span> <span class="o">=</span> <span class="s">&#39;Priority&#39;</span>
<span class="na">resources.log.writter1.filterParams.priority</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">resources.log.writter1.filterParams.operator</span> <span class="o">=</span> <span class="s">&quot;&lt;=&quot;</span>
</pre></div>
</div>
<p>Con el parámetro <strong>priority</strong> especificamos la prioridad, es decir, el código de error que le pasamos cuando hacemos <strong>$logger-&gt;log(&#8220;Mensaje&#8221;, Zend_Log:: WARN);</strong>. En este caso el 4 se corresponde con un warning.</p>
<p>Con el parámetro <strong>operator</strong> le indicamos la condición. En este caso que sea menor o igual a 4. Si no se indica el operator por defecto se usa el &#8216; &lt;= &#8216;. Es decir, el writter1 solamente va a loggear los mensajes cuyo código de error sea menor o igual que 4.</p>
<p>Por ejemplo, en el caso en el que queremos que se guarde el log en una carpeta concreta, pero queremos que cada tipo de log esté en un archivo distinto (<strong>miapp.error.log</strong>, <strong>miapp.warning.log</strong>, <strong>miapp.info.log</strong>...) se podría usar un writter tipo &#8216;Stream&#8217; distinto por cada tipo de log usando el filtro de prioridad y usando el operador &#8216;==&#8217;.</p>
<p>Sería algo así:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.log.stream.writerName</span> <span class="o">=</span> <span class="s">&quot;Stream&quot;</span>
<span class="na">resources.log.stream.writerParams.stream</span> <span class="o">=</span> <span class="s">APPLICATION_PATH &quot;/logs/miapp.error.log&quot;</span>
<span class="na">resources.log.stream.writerParams.mode</span> <span class="o">=</span> <span class="s">&quot;a&quot;</span>
<span class="na">resources.log.stream.filterName</span> <span class="o">=</span> <span class="s">&quot;Priority&quot;</span>
<span class="na">resources.log.stream.filterParams.priority</span> <span class="o">=</span> <span class="s">3</span>
<span class="na">resources.log.stream.filterParams.operator</span> <span class="o">=</span> <span class="s">&quot;&lt;=&quot;</span>
<span class="na">resources.log.stream.formatterName</span> <span class="o">=</span> <span class="s">&quot;Simple&quot;</span>
<span class="na">resources.log.stream.formatterParams.format</span> <span class="o">=</span> <span class="s">&#39;%timestamp% %priorityName% (%priority%): %message%&#39; PHP_EOL</span>
<span class="na">resources.log.stream1.writerName</span> <span class="o">=</span> <span class="s">&quot;Stream&quot;</span>
<span class="na">resources.log.stream1.writerParams.stream</span> <span class="o">=</span> <span class="s">APPLICATION_PATH &quot;/logs/miapp.warning.log&quot;</span>
<span class="na">resources.log.stream1.writerParams.mode</span> <span class="o">=</span> <span class="s">&quot;a&quot;</span>
<span class="na">resources.log.stream1.filterName</span> <span class="o">=</span> <span class="s">&quot;Priority&quot;</span>
<span class="na">resources.log.stream1.filterParams.priority</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">resources.log.stream1.filterParams.operator</span> <span class="o">=</span> <span class="s">&quot;==&quot;</span>
<span class="na">resources.log.stream1.formatterName</span> <span class="o">=</span> <span class="s">&quot;Simple&quot;</span>
<span class="na">resources.log.stream1.formatterParams.format</span> <span class="o">=</span> <span class="s">&#39;%timestamp% %priorityName% (%priority%): %message%&#39; PHP_EOL</span>
<span class="na">resources.log.stream2.writerName</span> <span class="o">=</span> <span class="s">&quot;Stream&quot;</span>
<span class="na">resources.log.stream.writerParams.stream</span> <span class="o">=</span> <span class="s">APPLICATION_PATH &quot;/logs/miapp.info.log&quot;</span>
<span class="na">resources.log.stream2.writerParams.mode</span> <span class="o">=</span> <span class="s">&quot;a&quot;</span>
<span class="na">resources.log.stream2.filterName</span> <span class="o">=</span> <span class="s">&quot;Priority&quot;</span>
<span class="na">resources.log.stream2.filterParams.priority</span> <span class="o">=</span> <span class="s">5</span>
<span class="na">resources.log.stream2.filterParams.operator</span> <span class="o">=</span> <span class="s">&quot;&gt;=&quot;</span>
<span class="na">resources.log.stream2.formatterName</span> <span class="o">=</span> <span class="s">&quot;Simple&quot;</span>
<span class="na">resources.log.stream2.formatterParams.format</span> <span class="o">=</span> <span class="s">&#39;%timestamp% %priorityName% (%priority%): %message%&#39; PHP_EOL</span>
</pre></div>
</div>
</div>
<div class="section" id="expresion-regular">
<h4><a class="toc-backref" href="#id9">Expresión regular</a><a class="headerlink" href="#expresion-regular" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">resources.log.writter2.filterName</span> <span class="o">=</span> <span class="s">&#39;Message&#39;</span>
<span class="na">resources.log.writter2.filterParams.regexp</span> <span class="o">=</span> <span class="s">&#39;#^\[Texto\]#&#39;</span>
</pre></div>
</div>
<p>Este filtro solo tiene un parámetro, <strong>regexp</strong>, que es en el que le indicamos la expresión regular a matchear contra el mensaje del log. Para que el writter loggee se tiene que cumplir la expresión regular, que en este caso loggeará todos los mensajes que empiecen por “[Texto]”. De esta manera podemos tener dos writters del mismo tipo que matcheen diferentes expresiones regulares.</p>
<p>Por ejemplo, queremos que los logs se mande por e-mail, pero en función de la parte del código en el que estemos queremos que se manden a una dirección u otra.
Para esto hacemos dos writters con un to distinto para cada uno y con una expresión regular distinta para cada uno. Así en función del mensaje del log se usará un writter u otro y por tanto se mandará a un e-mail o a otro.</p>
</div>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="klear-ini.html" class="btn btn-neutral float-right" title="klear.ini"/>Siguiente <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Ficheros INI"><span class="icon icon-circle-arrow-left"></span> Anterior</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2014, Irontec.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>